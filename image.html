<!doctype html>
<html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Image Compressor â€¢ ToolifyPro</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script></head>
<body class="bg-slate-900 text-slate-100 min-h-screen p-6">
<a href="/" class="text-sm text-slate-300">&larr; Home</a>
<h1 class="text-2xl font-bold mt-4">Image Compressor</h1>
<input id="img" type="file" accept="image/*" class="mt-4"/>
<label class="block mt-2 text-slate-300">Quality (0.1 - 1.0)</label>
<input id="quality" type="range" min="0.1" max="1" step="0.1" value="0.7"/>
<div class="mt-4">
  <button id="compress" class="px-4 py-2 bg-indigo-500 rounded">Compress</button>
  <a id="download" class="ml-4 px-4 py-2 border rounded hidden">Download</a>
</div>
<div id="preview" class="mt-4"></div>
<script>
document.getElementById('compress').addEventListener('click', ()=>{
  const f = document.getElementById('img').files[0];
  if(!f) return alert('Choose an image');
  const q = parseFloat(document.getElementById('quality').value);
  const img = new Image();
  const url = URL.createObjectURL(f);
  img.onload = ()=>{
    const c = document.createElement('canvas');
    const ctx = c.getContext('2d');
    const max = 1200;
    let w = img.width, h = img.height;
    if(w>max){ h = Math.round(h * (max/w)); w = max; }
    c.width = w; c.height = h;
    ctx.drawImage(img,0,0,w,h);
    c.toBlob((blob)=> {
      const u = URL.createObjectURL(blob);
      document.getElementById('preview').innerHTML = '<img src="'+u+'" style="max-width:100%"/>';
      const a = document.getElementById('download');
      a.href = u; a.download = 'compressed.jpg'; a.classList.remove('hidden');
    }, 'image/jpeg', q);
  };
  img.src = url;
});
</script>
</body></html>
